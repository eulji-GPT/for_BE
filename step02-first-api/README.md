# Step 02: μ²« λ²μ§Έ API - μ„μ§€λ€ν•™κµ μ„GPT

μ„μ§€λ€ν•™κµ μ„GPT ν”„λ΅μ νΈμ FastAPIλ΅ κ°„λ‹¨ν• APIλ¥Ό λ§λ“¤κ³  μ‹¤ν–‰ν•΄λ΄…λ‹λ‹¤.

## π― ν•™μµ λ©ν‘

- μ„μ§€λ€ν•™κµ μ„GPT FastAPI μ• ν”λ¦¬μΌ€μ΄μ… μƒμ„± λ° μ‹¤ν–‰
- λ‹¤μ–‘ν• HTTP λ©”μ„λ“ (GET, POST) μ‚¬μ©λ²•
- κ²½λ΅ λ§¤κ°λ³€μμ™€ λ™μ  λΌμ°ν… κµ¬ν„
- μ„μ§€λ€ν•™κµ μ„GPT ν”„λ΅μ νΈμ— νΉν™”λ API λ¬Έμ„ ν™•μΈ λ° ν™μ©
- λ‹¤μ–‘ν• μ‘λ‹µ νƒ€μ… μ²λ¦¬ λ° μ—λ¬ ν•Έλ“¤λ§

## π“‹ λ‹¨κ³„λ³„ μ§„ν–‰

### 1. μ„μ§€λ€ν•™κµ μ„GPT μ•„λ‚μ½λ‹¤ ν™κ²½ μ„¤μ •

```bash
# μ‚¬μ© κ°€λ¥ν• conda ν™κ²½ ν™•μΈ
conda info --envs

# μ„μ§€λ€ν•™κµ μ„GPT μ „μ© ν™κ²½ ν™μ„±ν™”
conda activate Python3.11-eulGPT-Backend
```

### 2. μ„μ§€λ€ν•™κµ μ„GPT μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰

```bash
# Step 02 λ””λ ‰ν† λ¦¬λ΅ μ΄λ™
cd step02-first-api

# μ„μ§€λ€ν•™κµ μ„GPT FastAPI μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
python main.py
```

μ‹¤ν–‰ μ„±κ³µ μ‹ λ‹¤μκ³Ό κ°™μ€ λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤:
```
INFO:     Started server process [ν”„λ΅μ„Έμ¤ID]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

### 3. μ„μ§€λ€ν•™κµ μ„GPT API λ¬Έμ„ ν™•μΈ

- **μ„μ§€λ€ν•™κµ μ„GPT Swagger UI**: `http://localhost:8000/docs`
- **μ„μ§€λ€ν•™κµ μ„GPT ReDoc**: `http://localhost:8000/redoc`
- μ΄ λ¬Έμ„λ“¤μ„ ν†µν•΄ μ„μ§€λ€ν•™κµ μ„GPT κ° μ—”λ“ν¬μΈνΈλ¥Ό μ§μ ‘ ν…μ¤νΈν•  μ μμµλ‹λ‹¤

### 4. μ„μ§€λ€ν•™κµ μ„GPT μ—”λ“ν¬μΈνΈ ν…μ¤νΈ

**μ„μ§€λ€ν•™κµ μ„GPT κΈ°λ³Έ μ—”λ“ν¬μΈνΈλ“¤:**
- μ„μ§€λ€ν•™κµ μ„GPT λ£¨νΈ: `http://localhost:8000/`
- μ„μ§€λ€ν•™κµ μ„GPT μΈμ‚¬λ§: `http://localhost:8000/hello`
- μ„μ§€λ€ν•™κµ μ„GPT μ„λ²„ μ‹κ°„: `http://localhost:8000/time`
- μ„μ§€λ€ν•™κµ μ„GPT μ„λ²„ μ •λ³΄: `http://localhost:8000/info`

**μ„μ§€λ€ν•™κµ μ„GPT κ³„μ‚°κΈ° μ—”λ“ν¬μΈνΈ (κ²½λ΅ λ§¤κ°λ³€μ μ‚¬μ©):**
- λ§μ…: `http://localhost:8000/calculate/add/10/5`
- λΊ„μ…: `http://localhost:8000/calculate/subtract/10/5`
- κ³±μ…: `http://localhost:8000/calculate/multiply/10/5`
- λ‚λ—μ…: `http://localhost:8000/calculate/divide/10/5`

**μ„μ§€λ€ν•™κµ μ„GPT POST μ—”λ“ν¬μΈνΈ:**
- λ©”μ‹μ§€ μ—μ½”: `http://localhost:8000/echo` (POST μ”μ²­)

## π”§ μ„μ§€λ€ν•™κµ μ„GPT μ‹¤μµ

1. **μ„μ§€λ€ν•™κµ μ„GPT μ½”λ“ λ¶„μ„**: main.py νμΌμ„ μ‚΄ν΄λ³΄κ³  κ° μ—”λ“ν¬μΈνΈμ κΈ°λ¥μ„ μ΄ν•΄ν•μ„Έμ”
2. **μ„μ§€λ€ν•™κµ μ„GPT μ„λ²„ μ‹¤ν–‰**: μ•„λ‚μ½λ‹¤ ν™κ²½μ„ ν™μ„±ν™”ν•κ³  μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ„Έμ”
3. **μ„μ§€λ€ν•™κµ μ„GPT API λ¬Έμ„ ν™•μΈ**: Swagger UIμ™€ ReDocμ—μ„ μλ™ μƒμ„±λ λ¬Έμ„λ¥Ό ν™•μΈν•μ„Έμ”
4. **μ„μ§€λ€ν•™κµ μ„GPT μ—”λ“ν¬μΈνΈ ν…μ¤νΈ**: κ° APIλ¥Ό μ§μ ‘ νΈμ¶ν•΄λ³΄κ³  μ‘λ‹µμ„ ν™•μΈν•μ„Έμ”
5. **μ„μ§€λ€ν•™κµ μ„GPT μƒλ΅μ΄ μ—”λ“ν¬μΈνΈ μ¶”κ°€**: λ³ΈμΈλ§μ API μ—”λ“ν¬μΈνΈλ¥Ό μ¶”κ°€ν•΄λ³΄μ„Έμ”

## π μ„μ§€λ€ν•™κµ μ„GPT ν…μ¤νΈ λ°©λ²•

### 1. μ›Ή λΈλΌμ°μ €μ—μ„ μ„μ§€λ€ν•™κµ μ„GPT ν…μ¤νΈ
μ§μ ‘ URLμ„ μ…λ ¥ν•μ—¬ GET μ”μ²­μ„ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

### 2. PowerShellμ—μ„ μ„μ§€λ€ν•™κµ μ„GPT ν…μ¤νΈ
```bash
# μ„μ§€λ€ν•™κµ μ„GPT κΈ°λ³Έ μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
Invoke-RestMethod -Uri "http://localhost:8000/hello" -Method GET

# μ„μ§€λ€ν•™κµ μ„GPT κ³„μ‚°κΈ° μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
Invoke-RestMethod -Uri "http://localhost:8000/calculate/add/15/25" -Method GET

# μ„μ§€λ€ν•™κµ μ„GPT POST μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
$body = @{message="μ„μ§€λ€ν•™κµ μ„GPT ν…μ¤νΈ"} | ConvertTo-Json
Invoke-RestMethod -Uri "http://localhost:8000/echo" -Method POST -Body $body -ContentType "application/json"
```

### 3. μ„μ§€λ€ν•™κµ μ„GPT Swagger UIμ—μ„ ν…μ¤νΈ
- `http://localhost:8000/docs`μ—μ„ κ° μ—”λ“ν¬μΈνΈμ "Try it out" λ²„νΌμ„ ν΄λ¦­
- ν•„μ”ν• λ§¤κ°λ³€μλ¥Ό μ…λ ¥ν•κ³  μ‹¤ν–‰ν•΄λ³΄μ„Έμ”

## π“ μ„μ§€λ€ν•™κµ μ„GPT μƒλ΅μ΄ κ°λ…

- **μ„μ§€λ€ν•™κµ μ„GPT FastAPI μ•± μΈμ¤ν„΄μ¤**: λ¨λ“  APIμ μ¤‘μ‹¬μ΄ λλ” κ°μ²΄
- **λ°μ½”λ μ΄ν„°**: `@app.get()`, `@app.post()` λ“±μΌλ΅ HTTP λ©”μ„λ“ μ •μ
- **κ²½λ΅ λ§¤κ°λ³€μ**: URLμ— ν¬ν•¨λ λ™μ  κ°’λ“¤ (`/calculate/{operation}/{a}/{b}`)
- **μλ™ λ¬Έμ„ν™”**: FastAPIκ°€ μλ™μΌλ΅ μƒμ„±ν•λ” API λ¬Έμ„
- **μ‘λ‹µ λ¨λΈ**: κµ¬μ΅°ν™”λ JSON μ‘λ‹µ λ°ν™
- **μ—λ¬ ν•Έλ“¤λ§**: 0μΌλ΅ λ‚λ„κΈ° λ“±μ μμ™Έ μƒν™© μ²λ¦¬

## π” μ½”λ“ λ¶„μ„

### μ£Όμ” μ—”λ“ν¬μΈνΈλ“¤:

1. **λ£¨νΈ μ—”λ“ν¬μΈνΈ** (`/`): κΈ°λ³Έ ν™μ λ©”μ‹μ§€
2. **μΈμ‚¬λ§ μ—”λ“ν¬μΈνΈ** (`/hello`): ν•κµ­μ–΄ λ©”μ‹μ§€ ν¬ν•¨
3. **μ‹κ°„ μ—”λ“ν¬μΈνΈ** (`/time`): ν„μ¬ μ‹κ°„κ³Ό νƒ€μ„μ¤νƒ¬ν”„
4. **μ„λ²„ μ •λ³΄** (`/info`): μ„λ²„ μƒνƒμ™€ μ‚¬μ© κ°€λ¥ν• μ—”λ“ν¬μΈνΈ λ©λ΅
5. **κ³„μ‚°κΈ°** (`/calculate/{operation}/{a}/{b}`): λ™μ  κ²½λ΅ λ§¤κ°λ³€μ μ‚¬μ©
6. **μ—μ½” API** (`/echo`): POST μ”μ²­μΌλ΅ μ „λ‹¬λ°›μ€ λ°μ΄ν„° λ°ν™

## π› μμ£Ό λ°μƒν•λ” μ΄μ

### 1. ν¬νΈ μ¶©λ
```
OSError: [Errno 98] Address already in use
```
- 8000 ν¬νΈκ°€ μ΄λ―Έ μ‚¬μ© μ¤‘μ…λ‹λ‹¤
- κΈ°μ΅΄ μ„λ²„λ¥Ό μΆ…λ£ν•κ±°λ‚ λ‹¤λ¥Έ ν¬νΈλ¥Ό μ‚¬μ©ν•μ„Έμ”

### 2. κ³„μ‚°κΈ° μ—λ¬
- 0μΌλ΅ λ‚λ„κΈ° μ‹λ„: `{"error": "Division by zero is not allowed"}`
- μλ»λ μ—°μ‚°μ: `{"error": "Invalid operation"}`

### 3. POST μ”μ²­ ν•μ‹ μ¤λ¥
- Content-Typeμ΄ `application/json`μΈμ§€ ν™•μΈν•μ„Έμ”
- μ”μ²­ λ³Έλ¬Έμ΄ μ¬λ°”λ¥Έ JSON ν•μ‹μΈμ§€ ν™•μΈν•μ„Έμ”

## π“ μ°Έκ³  μλ£

- [FastAPI λΌμ°ν… κ°€μ΄λ“](https://fastapi.tiangolo.com/tutorial/path-params/)
- [HTTP λ©”μ„λ“ μ •μ](https://fastapi.tiangolo.com/tutorial/first-steps/)
- [μλ™ API λ¬Έμ„ν™”](https://fastapi.tiangolo.com/tutorial/metadata/)

## β… λ‹¤μ λ‹¨κ³„

Step 02κ°€ μ™„λ£λλ©΄ Step 03μΌλ΅ μ΄λ™ν•μ—¬ κ²½λ΅ λ§¤κ°λ³€μλ¥Ό λ” μμ„Έν ν•™μµν•μ„Έμ”.

**μ„±κ³µ ν™•μΈ μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] μ•„λ‚μ½λ‹¤ ν™κ²½μ—μ„ μ„λ²„ μ‹¤ν–‰ μ„±κ³µ
- [ ] λ¨λ“  GET μ—”λ“ν¬μΈνΈ ν…μ¤νΈ μ™„λ£
- [ ] κ³„μ‚°κΈ° κΈ°λ¥ (4κ°€μ§€ μ—°μ‚°) ν…μ¤νΈ μ™„λ£
- [ ] POST μ—”λ“ν¬μΈνΈ ν…μ¤νΈ μ™„λ£
- [ ] Swagger UIμ—μ„ API λ¬Έμ„ ν™•μΈ μ™„λ£
- [ ] μ—λ¬ ν•Έλ“¤λ§ (0μΌλ΅ λ‚λ„κΈ° λ“±) ν™•μΈ μ™„λ£

**ν…μ¤νΈ μ™„λ£ μμ‹:**
```json
// GET /hello μ‘λ‹µ
{
  "greeting": "Hello",
  "message": "FastAPIλ΅ λ§λ“  μ²« λ²μ§Έ APIμ…λ‹λ‹¤!"
}

// GET /calculate/add/15/25 μ‘λ‹µ
{
  "operation": "add",
  "operand1": 15.0,
  "operand2": 25.0,
  "result": 40.0
}
```
